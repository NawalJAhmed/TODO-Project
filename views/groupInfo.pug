extends layout
append head
    link(rel="stylesheet", href="/stylesheets/tasks.css")
    link(rel="stylesheet", href="/stylesheets/groupInfo.css")
    script(src="/javascripts/index.js" type="module")
block tasksList
    .groupHeader
        h1 #{groupName}
        if isDashboard
            input(type='search' name='search' placeholder='Search your tasks' id='search')

    h2= `Incomplete Tasks List`
    .taskHeader
        form(action='' method='post')
            input(type='hidden' name='_csrf' value=csrfToken)
            label(for='name')
            input(type='input' name='name' placeholder="Add a task..." required)#addTaskBox
            select(type=`${groupId === dashboard ? 'hidden': "select"}` name='assignTo' value= userId)
                each user in users
                    option(value= user.id)= user.username
            label(for='due_date')
            input(type='date' name='due_date' placeholder="2021-12-31" min="2021-10-20" max="2022-12-31" required pattern="\d{4}-\d{2}-\d{2}")
            button(class='addTaskButton' type='submit' ) Add Task
        button#completeTaskListButton Show Complete Tasks

    if tasks
        .taskListContainer
            ul.taskList
                each task in tasks
                    if task.completed === false
                        //- display task name
                        //- li= task.dataValues.name
                        li
                            form(action=`/users/${userId}/${groupId}/${task.id}/completed` method='post')
                                input(type='hidden' name='_csrf' value=csrfToken)
                                input(type='checkbox' class="singletask" name= task.dataValues.name onChange="this.form.submit()")
                            a(href=`/users/${user.id}/${groupId}/${task.dataValues.id}` class="tasklink")=task.dataValues.name
                each el in Array(29 - tasks.length)
                    li

    //- div.taskList
    //-     if tasks
    //-         each task in tasks
    //-             if task.completed === false
    //-                 div.currentTask
    //-                     input(type='checkbox' class="singletask" name= task.dataValues.name)
    //-                     label(for='task.dataValues.name')= task.dataValues.name
    //-                     br
block group
    div
        div.groupTopBar
            h1.groupTitle= members.name
            div
                if !isDashboard && isOwner
                    form(action=`/users/${userId}/${groupId}/deleteGroup` method='post')
                        button.deleteGroupBut(type='submit') Delete Group

        div
            p.groupOwner Group Owner: #{ownerName.username}
        if !isDashboard && isOwner
            form.groupForm(action=`/users/${userId}/${groupId}/addMember` method='post')
                input(type='hidden' name='_csrf' value=csrfToken)
                label(for='addMember')
                select(type='select' name='addMember' placeholder='Add Member')
                    option(value='') --Select a Member--
                    each user in users
                        option(value= user.id)= user.username
                button(type='submit') Add Member
        if members && !isDashboard && isOwner
            form.groupForm(action=`/users/${userId}/${groupId}/removeMember` method='post')
                input(type='hidden' name='_csrf' value=csrfToken)
                label(for='removeMember')
                select(type='select' name='removeMember' placeholder='Remove Member')
                    option(value='') --Select a Member--
                    each member in members.dataValues.groupToMember
                        option(value= member.id)= member.username
                button(type='submit') Remove Member
        div
        if members && !isDashboard

            p.groupListTitle Group Members
            ul.groupList
            each member in members.dataValues.groupToMember
                li.groupMembers= member.dataValues.username
