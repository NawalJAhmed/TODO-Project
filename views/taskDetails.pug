extends groupInfo
append head
    link(rel="stylesheet", href="/stylesheets/tasks.css")
    link(rel="stylesheet", href="/stylesheets/groupInfo.css")
    script(src="/javascripts/index.js" type="module")

block group
    block group
        h1 #{taskName}
        p Edit Task
        a(class='groupDetailsButton' id="groupDetailsBttn" href=`/users/${userId}/${groupId}`) Group Details
        P Assigned To: #{taskOwnerName}
        if taskOwnerId === userId
            form(action=`/users/${userId}/${groupId}/${taskId}/delete` method='post')
                button.deleteTaskButtn(type='submit') Delete Task
            form(action=`/users/${userId}/${groupId}/${taskId}` method='post')
                input(type='hidden' name='_csrf' value=csrfToken)
                label(for='name')
                input(type='input' name='name' value=`${taskName}` required)
                select(type=`${groupId === dashboard ? 'hidden': "select"}` name='assignTo' value= userId)
                    option(value= user.id)= user.username
                    each member in members.dataValues.groupToMember
                        option(value= member.id)= member.username
                p `#{taskDueDate}`
                input(type='date' name='due_date' value=`${taskDueDate}` min="2021-10-20" max="2022-12-31" required)
                button(class='editTaskButton' type='submit' ) Edit Task

            form(action=`/users/${userId}/${groupId}/${taskId}/addSubTask` method='post')
                input(type='hidden' name='_csrf' value=csrfToken)
                label(for='name')
                input(type='input' name='name' placeholder="Add a subtask..." required)#addTaskBox
                br
                button(class='addTaskButton' type='submit' ) Add Sub-task

        if Subtask
            p Sub-tasks List
            ul.subtaskList
                each sub in Subtask
                        li= sub.dataValues.name
                            form(action=`/users/${userId}/${groupId}/${taskId}/${sub.dataValues.id}/delete` method='post')
                                input(type='hidden' name='_csrf' value=csrfToken)
                                if taskOwnerId === userId
                                    button.deleteTaskButtn(type='submit') Delete Subtask
